<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="moldregister_subreport2" language="groovy" pageWidth="802" pageHeight="555" orientation="Landscape" columnWidth="802" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="16356b47-60ea-4593-ae49-02841b4e85e6">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="SYS_ID" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="ATCH_NO" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT
	(
        SELECT COUNT(*)
        FROM   (SELECT p.FILE_NO ,p.FILE_NAME
					 FROM   SYS_FILE p
                WHERE  SYS_ID    =$P{SYS_ID}
                AND    ATCH_GRUP =  'B14'
                AND    ATCH_NO   = $P{ATCH_NO}
					 ORDER BY FILE_NO) A
			) IMG_CNT
       ,(SELECT CONCAT('../../upload/real/MOLD/' , A.SAVE_NAME)
        FROM   (SELECT
				        @ROWNUM := @ROWNUM + 1 AS ROWNUM,
				         p.FILE_NO ,p.FILE_NAME,p.SAVE_NAME
					    FROM
					        SYS_FILE p,
					       (SELECT @ROWNUM := 0) R
					   WHERE  SYS_ID    =$P{SYS_ID}
				                AND    ATCH_GRUP =  'B14'
				                AND    ATCH_NO   = $P{ATCH_NO}
				                ORDER BY FILE_NO
					  ) A
					  WHERE ROWNUM=1
       ) AS IMG_01
       ,(SELECT CONCAT('../../upload/real/MOLD/' , A.SAVE_NAME)
        FROM   (SELECT
				        @ROWNUM := @ROWNUM + 1 AS ROWNUM,
				         p.FILE_NO ,p.FILE_NAME,p.SAVE_NAME
					    FROM
					        SYS_FILE p,
					       (SELECT @ROWNUM := 0) R
					   WHERE  SYS_ID    =$P{SYS_ID}
				                AND    ATCH_GRUP =  'B14'
				                AND    ATCH_NO   = $P{ATCH_NO}
				                ORDER BY FILE_NO
					  ) A
					  WHERE ROWNUM=2
       ) AS IMG_02
        ,(SELECT CONCAT('../../upload/real/MOLD/' ,A.SAVE_NAME)
        FROM   (SELECT
				        @ROWNUM := @ROWNUM + 1 AS ROWNUM,
				         p.FILE_NO ,p.FILE_NAME,p.SAVE_NAME
					    FROM
					        SYS_FILE p,
					       (SELECT @ROWNUM := 0) R
					   WHERE  SYS_ID    =$P{SYS_ID}
				                AND    ATCH_GRUP =  'B14'
				                AND    ATCH_NO   = $P{ATCH_NO}
				                ORDER BY FILE_NO
					  ) A
					  WHERE ROWNUM=3
       ) AS IMG_03
        ,(SELECT CONCAT('../../upload/real/MOLD/' ,A.SAVE_NAME)
        FROM   (SELECT
				        @ROWNUM := @ROWNUM + 1 AS ROWNUM,
				         p.FILE_NO ,p.FILE_NAME,p.SAVE_NAME
					    FROM
					        SYS_FILE p,
					       (SELECT @ROWNUM := 0) R
					   WHERE  SYS_ID    =$P{SYS_ID}
				                AND    ATCH_GRUP =  'B14'
				                AND    ATCH_NO   = $P{ATCH_NO}
				                ORDER BY FILE_NO
					  ) A
					  WHERE ROWNUM=4
       ) AS IMG_04
FROM DUAL]]>
	</queryString>
	<field name="IMG_CNT" class="java.lang.Long"/>
	<field name="IMG_01" class="java.lang.String"/>
	<field name="IMG_02" class="java.lang.String"/>
	<field name="IMG_03" class="java.lang.String"/>
	<field name="IMG_04" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="180" splitType="Stretch">
			<rectangle>
				<reportElement x="600" y="20" width="202" height="158" uuid="20c9767d-00ac-4e6e-a8c6-379ba91b411d"/>
			</rectangle>
			<rectangle>
				<reportElement x="0" y="0" width="802" height="20" uuid="a9f41a7f-f7b0-4a31-80f2-dfc56c8297ff"/>
			</rectangle>
			<staticText>
				<reportElement x="0" y="0" width="802" height="20" uuid="46946da5-9ea3-4ffe-ae67-2a716c04b805"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" pdfFontName="HYGoThic-Medium" pdfEncoding="UniKS-UCS2-H"/>
				</textElement>
				<text><![CDATA[  * 첨부 : 금형사진]]></text>
			</staticText>
			<staticText>
				<reportElement x="111" y="0" width="30" height="20" uuid="05f8f045-f3c4-405d-bfba-a22578db872b"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" pdfFontName="HYGoThic-Medium" pdfEncoding="UniKS-UCS2-H"/>
				</textElement>
				<text><![CDATA[매]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="81" y="0" width="30" height="20" uuid="305fe1fc-d27d-4ff5-9beb-4aa7d2ab31ec"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" pdfFontName="HYGoThic-Medium" pdfEncoding="UniKS-UCS2-H"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{IMG_CNT}]]></textFieldExpression>
			</textField>
			<rectangle>
				<reportElement x="0" y="20" width="200" height="158" uuid="43c05afc-9ed9-48e8-8b29-0a48e74597cf"/>
			</rectangle>
			<rectangle>
				<reportElement x="200" y="20" width="200" height="158" uuid="fae473c2-ab64-475c-ac22-64cd0f1b48d7"/>
			</rectangle>
			<rectangle>
				<reportElement x="400" y="20" width="200" height="158" uuid="17650b17-437f-4eef-8b9e-fd24f686f7ac"/>
			</rectangle>
			<image onErrorType="Blank">
				<reportElement x="6" y="25" width="190" height="153" uuid="fae1e390-4615-4106-a27b-52b4485d975c"/>
				<imageExpression><![CDATA[$F{IMG_01}]]></imageExpression>
			</image>
			<image onErrorType="Blank">
				<reportElement x="206" y="25" width="190" height="153" uuid="1d362d24-56c7-4d06-b4c1-d53d6d58173d"/>
				<imageExpression><![CDATA[$F{IMG_02}]]></imageExpression>
			</image>
			<image onErrorType="Blank">
				<reportElement x="406" y="25" width="190" height="153" uuid="d2d0e5b0-8cee-4f31-9c2f-3e2732ee1d07"/>
				<imageExpression><![CDATA[$F{IMG_03}]]></imageExpression>
			</image>
			<image onErrorType="Blank">
				<reportElement x="607" y="25" width="190" height="153" uuid="9c6680f3-036e-4789-b0db-3594607ae84c"/>
				<imageExpression><![CDATA[$F{IMG_04}]]></imageExpression>
			</image>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
